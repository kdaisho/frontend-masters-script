Script started on Sun May 15 11:10:31 2022
[1m[7m%[27m[1m[0m                                                                                                                                                                                                             ]2;daishokomiyama@MacBook-Pro:~/Code/frontend-masters-script]1;..asters-script[0m[27m[24m[J[01;32mâžœ  [36mfrontend-masters-script[00m [01;34mgit:([31mmain[34m) [33mâœ—[00m [K[?1h=[?2004hnpm run build[?1l>[?2004l
]2;npm run build]1;npm
> frontend-masters-script@0.1.0 build
> node script && next build

[?25l[36minfo[39m  - Checking validity of types [36m.[39m[2K[1G[?25h[36minfo[39m  - Checking validity of types  
[?25l[36minfo[39m  - Creating an optimized production build [36m.[39m[2K[1G[36minfo[39m  - Creating an optimized production build [36m..[39m[2K[1G[36minfo[39m  - Creating an optimized production build [36m...[39m[2K[1G[36minfo[39m  - Creating an optimized production build [36m.[39m[2K[1G[?25h[36minfo[39m  - Creating an optimized production build  
[36minfo[39m  - Compiled successfully
[?25l[36minfo[39m  - Collecting page data [36m.[39m[2K[1G[?25h[36minfo[39m  - Collecting page data  
[?25l[36m[    ][39m [36minfo[39m  - Generating static pages (0/2)[2K[1G[?25h[36minfo[39m  - Generating static pages (2/2)
[?25l[36minfo[39m  - Finalizing page optimization [36m.[39m[2K[1G[?25h[36minfo[39m  - Finalizing page optimization  

[4mPage[24m                                       [4mSize[24m     [4mFirst Load JS[24m
â”Œ Î» /                                      1.78 kB        [32m76.7 kB[39m
â”œ   â”” css/33be1f2374dce812.css             256 B
â”œ   /_app                                  0 B            [32m74.9 kB[39m
â”œ â—‹ /404                                   193 B          [32m75.1 kB[39m
â”” Î» /api/search                            0 B            [32m74.9 kB[39m
+ First Load JS shared by all              [32m74.9 kB[39m
  â”œ chunks/framework-1f10003e17636e37.js   45 kB
  â”œ chunks/main-d8b1ff545a609496.js        28.6 kB
  â”œ chunks/pages/_app-69da446bea935969.js  493 B
  â”œ chunks/webpack-69bfa6990bb9e155.js     769 B
  â”” css/27d177a30947857b.css               194 B

Î»  (Server)  server-side renders at runtime (uses [36mgetInitialProps[39m or [36mgetServerSideProps[39m)
â—‹  (Static)  automatically rendered as static HTML (uses no initial props)

[?25h[1m[7m%[27m[1m[0m                                                                                                                                                                                                             ]2;daishokomiyama@MacBook-Pro:~/Code/frontend-masters-script]1;..asters-script[0m[27m[24m[J[01;32mâžœ  [36mfrontend-masters-script[00m [01;34mgit:([31mmain[34m) [33mâœ—[00m [K[?1h=[?2004hnpm run build[?1l>[?2004l
]2;npm run build]1;npm
> frontend-masters-script@0.1.0 build
> node script && next build

hi
[?25l[36minfo[39m  - Checking validity of types [36m.[39m[2K[1G[?25h[36minfo[39m  - Checking validity of types  
[?25l[36minfo[39m  - Creating an optimized production build [36m.[39m[2K[1G[36minfo[39m  - Creating an optimized production build [36m..[39m[2K[1G[36minfo[39m  - Creating an optimized production build [36m...[39m[2K[1G[?25h[36minfo[39m  - Creating an optimized production build  
[36minfo[39m  - Compiled successfully
[?25l[36minfo[39m  - Collecting page data [36m.[39m[2K[1G[36minfo[39m  - Collecting page data [36m..[39m[2K[1G[36minfo[39m  - Collecting page data [36m...[39m[2K[1G[36minfo[39m  - Collecting page data [36m.[39m[2K[1G[36minfo[39m  - Collecting page data [36m..[39m[2K[1G[?25h[36minfo[39m  - Collecting page data  
[?25l[36m[    ][39m [36minfo[39m  - Generating static pages (0/2)[2K[1G[?25h[36minfo[39m  - Generating static pages (2/2)
[?25l[36minfo[39m  - Finalizing page optimization [36m.[39m[2K[1G[?25h[36minfo[39m  - Finalizing page optimization  

[4mPage[24m                                       [4mSize[24m     [4mFirst Load JS[24m
â”Œ Î» /                                      1.78 kB        [32m76.7 kB[39m
â”œ   â”” css/33be1f2374dce812.css             256 B
â”œ   /_app                                  0 B            [32m74.9 kB[39m
â”œ â—‹ /404                                   193 B          [32m75.1 kB[39m
â”” Î» /api/search                            0 B            [32m74.9 kB[39m
+ First Load JS shared by all              [32m74.9 kB[39m
  â”œ chunks/framework-1f10003e17636e37.js   45 kB
  â”œ chunks/main-d8b1ff545a609496.js        28.6 kB
  â”œ chunks/pages/_app-69da446bea935969.js  493 B
  â”œ chunks/webpack-69bfa6990bb9e155.js     769 B
  â”” css/27d177a30947857b.css               194 B

Î»  (Server)  server-side renders at runtime (uses [36mgetInitialProps[39m or [36mgetServerSideProps[39m)
â—‹  (Static)  automatically rendered as static HTML (uses no initial props)

[?25h[1m[7m%[27m[1m[0m                                                                                                                                                                                                             ]2;daishokomiyama@MacBook-Pro:~/Code/frontend-masters-script]1;..asters-script[0m[27m[24m[J[01;32mâžœ  [36mfrontend-masters-script[00m [01;34mgit:([31mmain[34m) [33mâœ—[00m [K[?1h=[?2004hnpm run build[?1l>[?2004l
]2;npm run build]1;npm
> frontend-masters-script@0.1.0 build
> npm run script && next build


> frontend-masters-script@0.1.0 script
> node script

hi
[?25l[36minfo[39m  - Checking validity of types [36m.[39m[2K[1G[?25h[36minfo[39m  - Checking validity of types  
[?25l[36minfo[39m  - Creating an optimized production build [36m.[39m[2K[1G[36minfo[39m  - Creating an optimized production build [36m..[39m[2K[1G[36minfo[39m  - Creating an optimized production build [36m...[39m[2K[1G[36minfo[39m  - Creating an optimized production build [36m.[39m[2K[1G[?25h[36minfo[39m  - Creating an optimized production build  
[36minfo[39m  - Compiled successfully
[?25l[36minfo[39m  - Collecting page data [36m.[39m[2K[1G[36minfo[39m  - Collecting page data [36m..[39m[2K[1G[36minfo[39m  - Collecting page data [36m...[39m[2K[1G[36minfo[39m  - Collecting page data [36m.[39m[2K[1G[?25h[36minfo[39m  - Collecting page data  
[?25l[36m[    ][39m [36minfo[39m  - Generating static pages (0/2)[2K[1G[?25h[36minfo[39m  - Generating static pages (2/2)
[?25l[36minfo[39m  - Finalizing page optimization [36m.[39m[2K[1G[?25h[36minfo[39m  - Finalizing page optimization  

[4mPage[24m                                       [4mSize[24m     [4mFirst Load JS[24m
â”Œ Î» /                                      1.78 kB        [32m76.7 kB[39m
â”œ   â”” css/33be1f2374dce812.css             256 B
â”œ   /_app                                  0 B            [32m74.9 kB[39m
â”œ â—‹ /404                                   193 B          [32m75.1 kB[39m
â”” Î» /api/search                            0 B            [32m74.9 kB[39m
+ First Load JS shared by all              [32m74.9 kB[39m
  â”œ chunks/framework-1f10003e17636e37.js   45 kB
  â”œ chunks/main-d8b1ff545a609496.js        28.6 kB
  â”œ chunks/pages/_app-69da446bea935969.js  493 B
  â”œ chunks/webpack-69bfa6990bb9e155.js     769 B
  â”” css/27d177a30947857b.css               194 B

Î»  (Server)  server-side renders at runtime (uses [36mgetInitialProps[39m or [36mgetServerSideProps[39m)
â—‹  (Static)  automatically rendered as static HTML (uses no initial props)

[?25h[1m[7m%[27m[1m[0m                                                                                                                                                                                                             ]2;daishokomiyama@MacBook-Pro:~/Code/frontend-masters-script]1;..asters-script[0m[27m[24m[J[01;32mâžœ  [36mfrontend-masters-script[00m [01;34mgit:([31mmain[34m) [33mâœ—[00m [K[?1h=[?2004hnpm run build[13Dll           [11Dtouch .DS_Store[15Dll             [13Dl  nnpm run sr cript[?1l>[?2004l
]2;npm run script]1;npm
> frontend-masters-script@0.1.0 script
> node script

hi
[1m[7m%[27m[1m[0m                                                                                                                                                                                                             ]2;daishokomiyama@MacBook-Pro:~/Code/frontend-masters-script]1;..asters-script[0m[27m[24m[J[01;32mâžœ  [36mfrontend-masters-script[00m [01;34mgit:([31mmain[34m) [33mâœ—[00m [K[?1h=[?2004hnpm run script[?1l>[?2004l
]2;npm run script]1;npm
> frontend-masters-script@0.1.0 script
> node script

âœ…: clean up
âœ…: build script
[1m[7m%[27m[1m[0m                                                                                                                                                                                                             ]2;daishokomiyama@MacBook-Pro:~/Code/frontend-masters-script]1;..asters-script[0m[27m[24m[J[01;32mâžœ  [36mfrontend-masters-script[00m [01;34mgit:([31mmain[34m) [33mâœ—[00m [K[?1h=[?2004hnpm run script[?1l>[?2004l
]2;npm run script]1;npm
> frontend-masters-script@0.1.0 script
> node script

âœ… build script
[1m[7m%[27m[1m[0m                                                                                                                                                                                                             ]2;daishokomiyama@MacBook-Pro:~/Code/frontend-masters-script]1;..asters-script[0m[27m[24m[J[01;32mâžœ  [36mfrontend-masters-script[00m [01;34mgit:([31mmain[34m) [33mâœ—[00m [K[?1h=[?2004hnpm run scriptdev   [11Dll         [9Dnpm run build[?1l>[?2004l
]2;npm run build]1;npm
> frontend-masters-script@0.1.0 build
> npm run script && next build


> frontend-masters-script@0.1.0 script
> node script

ðŸ†˜ Failed to delete .DS_Store: Error: ENOENT: no such file or directory, unlink './scripts.DS_Store'
[90m    at Object.unlinkSync (node:fs:1718:3)[39m
    at killJunkFile (/Users/daishokomiyama/Code/frontend-masters-script/script.js:6:8)
    at cleanUp (/Users/daishokomiyama/Code/frontend-masters-script/script.js:16:5)
    at Object.<anonymous> (/Users/daishokomiyama/Code/frontend-masters-script/script.js:67:1)
[90m    at Module._compile (node:internal/modules/cjs/loader:1101:14)[39m
[90m    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1153:10)[39m
[90m    at Module.load (node:internal/modules/cjs/loader:981:32)[39m
[90m    at Function.Module._load (node:internal/modules/cjs/loader:822:12)[39m
[90m    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)[39m
[90m    at node:internal/main/run_main_module:17:47[39m {
  errno: [33m-2[39m,
  syscall: [32m'unlink'[39m,
  code: [32m'ENOENT'[39m,
  path: [32m'./scripts.DS_Store'[39m
}
node:internal/fs/utils:344
    throw err;
    ^

Error: ENOTDIR: not a directory, scandir './scripts/.DS_Store'
[90m    at Object.readdirSync (node:fs:1390:3)[39m
    at cleanUp (/Users/daishokomiyama/Code/frontend-masters-script/script.js:20:12)
    at Object.<anonymous> (/Users/daishokomiyama/Code/frontend-masters-script/script.js:67:1)
[90m    at Module._compile (node:internal/modules/cjs/loader:1101:14)[39m
[90m    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1153:10)[39m
[90m    at Module.load (node:internal/modules/cjs/loader:981:32)[39m
[90m    at Function.Module._load (node:internal/modules/cjs/loader:822:12)[39m
[90m    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)[39m
[90m    at node:internal/main/run_main_module:17:47[39m {
  errno: [33m-20[39m,
  syscall: [32m'scandir'[39m,
  code: [32m'ENOTDIR'[39m,
  path: [32m'./scripts/.DS_Store'[39m
}
[1m[7m%[27m[1m[0m                                                                                                                                                                                                             ]2;daishokomiyama@MacBook-Pro:~/Code/frontend-masters-script]1;..asters-script[0m[27m[24m[J[01;31mâžœ  [36mfrontend-masters-script[00m [01;34mgit:([31mmain[34m) [33mâœ—[00m [K[?1h=[?2004hnpm run build[?1l>[?2004l
]2;npm run build]1;npm
> frontend-masters-script@0.1.0 build
> npm run script && next build


> frontend-masters-script@0.1.0 script
> node script

âœ… clean up
ðŸ†˜ Failed to delete .DS_Store: TEST
âœ… build script
ðŸ†˜ Failed to build scripts: TEST
[?25l[36minfo[39m  - Checking validity of types [36m.[39m[2K[1G[?25h[36minfo[39m  - Checking validity of types  
[?25l[36minfo[39m  - Creating an optimized production build [36m.[39m[2K[1G[36minfo[39m  - Creating an optimized production build [36m..[39m[2K[1G[36minfo[39m  - Creating an optimized production build [36m...[39m[2K[1G[36minfo[39m  - Creating an optimized production build [36m.[39m[2K[1G[?25h[36minfo[39m  - Creating an optimized production build  
[36minfo[39m  - Compiled successfully
[?25l[36minfo[39m  - Collecting page data [36m.[39m[2K[1G[?25h[36minfo[39m  - Collecting page data  
[?25l[36m[    ][39m [36minfo[39m  - Generating static pages (0/3)[2K[1G[?25h[36minfo[39m  - Generating static pages (3/3)
[?25l[36minfo[39m  - Finalizing page optimization [36m.[39m[2K[1G[?25h[36minfo[39m  - Finalizing page optimization  

[4mPage[24m                                       [4mSize[24m     [4mFirst Load JS[24m
â”Œ â—‹ /                                      1.1 kB           [32m76 kB[39m
â”œ   â”” css/33be1f2374dce812.css             256 B
â”œ   /_app                                  0 B            [32m74.9 kB[39m
â”œ â—‹ /404                                   193 B          [32m75.1 kB[39m
â”” Î» /api/search                            0 B            [32m74.9 kB[39m
+ First Load JS shared by all              [32m74.9 kB[39m
  â”œ chunks/framework-1f10003e17636e37.js   45 kB
  â”œ chunks/main-d8b1ff545a609496.js        28.6 kB
  â”œ chunks/pages/_app-69da446bea935969.js  493 B
  â”œ chunks/webpack-69bfa6990bb9e155.js     769 B
  â”” css/27d177a30947857b.css               194 B

Î»  (Server)  server-side renders at runtime (uses [36mgetInitialProps[39m or [36mgetServerSideProps[39m)
â—‹  (Static)  automatically rendered as static HTML (uses no initial props)

[?25h[1m[7m%[27m[1m[0m                                                                                                                                                                                                             ]2;daishokomiyama@MacBook-Pro:~/Code/frontend-masters-script]1;..asters-script[0m[27m[24m[J[01;32mâžœ  [36mfrontend-masters-script[00m [01;34mgit:([31mmain[34m) [33mâœ—[00m [K[?1h=[?2004hnnpm run sr cript[?1l>[?2004l
]2;npm run script]1;npm
> frontend-masters-script@0.1.0 script
> node script

âœ… clean up
âœ… build script
[1m[7m%[27m[1m[0m                                                                                                                                                                                                             ]2;daishokomiyama@MacBook-Pro:~/Code/frontend-masters-script]1;..asters-script[0m[27m[24m[J[01;32mâžœ  [36mfrontend-masters-script[00m [01;34mgit:([31mmain[34m) [33mâœ—[00m [K[?1h=[?2004hggit st[?1l>[?2004l
]2;git st]1;gitOn branch main
Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	[31mmodified:   constants.js[m
	[31mdeleted:    lib/utils.js[m
	[31mmodified:   package.json[m
	[31mmodified:   pages/api/search.js[m
	[31mmodified:   pages/index.js[m

Untracked files:
  (use "git add <file>..." to include in what will be committed)
	[31mscript.js[m
	[31mscripts.json[m
	[31mtypescript[m

no changes added to commit (use "git add" and/or "git commit -a")
[1m[7m%[27m[1m[0m                                                                                                                                                                                                             ]2;daishokomiyama@MacBook-Pro:~/Code/frontend-masters-script]1;..asters-script[0m[27m[24m[J[01;32mâžœ  [36mfrontend-masters-script[00m [01;34mgit:([31mmain[34m) [33mâœ—[00m [K[?1h=[?2004hggit diff[?1l>[?2004l
]2;git diff]1;git[?1049h[?1h=[1mdiff --git a/constants.js b/constants.js[m[m
[1mindex e3e2b7a..266a06d 100644[m[m
[1m--- a/constants.js[m[m
[1m+++ b/constants.js[m[m
[36m@@ -1,3 +1,9 @@[m[m
[31m-export const UTF8 = 'utf-8'[m[m
[31m-export const DS_STORE = '.DS_Store'[m[m
[31m-export const SCRIPTS = 'scripts'[m[m
[32m+[m[32mconst UTF8 = 'utf-8'[m[m
[32m+[m[32mconst DS_STORE = '.DS_Store'[m[m
[32m+[m[32mconst SCRIPTS = 'scripts'[m[m
[32m+[m[m
[32m+[m[32mmodule.exports = {[m[m
[32m+[m[32m  UTF8,[m[m
[32m+[m[32m  DS_STORE,[m[m
[32m+[m[32m  SCRIPTS,[m[m
[32m+[m[32m}[m[m
[1mdiff --git a/lib/utils.js b/lib/utils.js[m[m
[1mdeleted file mode 100644[m[m
[1mindex 7f80310..0000000[m[m
[1m--- a/lib/utils.js[m[m
[1m+++ /dev/null[m[m
[36m@@ -1,65 +0,0 @@[m[m
[31m-import fs from 'fs'[m[m
[31m-import { DS_STORE, SCRIPTS } from '../constants'[m[m
[31m-[m[m
[31m-export const killJunkFile = filepath => {[m[m
[31m-  try {[m[m
[31m-    fs.unlinkSync('./scripts/' + filepath)[m[m
[31m-  } catch (err) {[m[m
[31m-    console.error('Failing to delete junk files:', err)[m[m
[31m-  }[m[m
[31m-}[m[m
[31m-[m[m
[31m-export const cleanUp = (found = false) => {[m[m
[31m-  if (fs.readdirSync(`./${SCRIPTS}`).includes(DS_STORE)) {[m[m
[31m-    killJunkFile(DS_STORE)[m[m
[31m-    found = true[m[m
[31m-  }[m[m
[31m-[m[m
[31m-  for (const folder of fs.readdirSync(`./${SCRIPTS}`)) {[m[m
[31m-    if (fs.readdirSync(`./${SCRIPTS}/${folder}`).includes(DS_STORE)) {[m[m
[31m-      killJunkFile(`${folder}/${DS_STORE}`)[m[m
[31m-      found = true[m[m
[31m-    }[m[m
[31m-  }[m[m
[31m-[m[m
[31m-  return found[m[m
[31m-}[m[m
[31m-[m[m
[31m-export const toArray = str => {[m[m
[31m-  return str.split(/\n/g).filter(s => s.length)[m[m
[31m-}[m[m
[31m-[m[m
[31m-export const buildScript = () => {[m[m
[31m-  const courses = fs.readdirSync(`./${SCRIPTS}/`)[m[m
:[K[K[31m-  const timeFrame = /\[(\d|:)+\]/[m[m
[31m-  const ctx = {}[m[m
[31m-[m[m
[31m-  for (const course of courses) {[m[m
[31m-    ctx[course] = {}[m[m
[31m-    const sessions = fs.readdirSync(`./${SCRIPTS}/${course}`)[m[m
[31m-[m[m
[31m-    for (const session of sessions) {[m[m
[31m-      const text = fs[m[m
[31m-        .readFileSync(`./${SCRIPTS}/${course}/${session}`)[m[m
[31m-        .toString()[m[m
[31m-[m[m
[31m-      let key[m[m
[31m-      const script = toArray(text).reduce((acc, cur) => {[m[m
[31m-        if (cur.match(timeFrame)) {[m[m
[31m-          key = cur[m[m
[31m-        } else {[m[m
[31m-          acc[key] = cur[m[m
[31m-        }[m[m
[31m-[m[m
[31m-        return acc[m[m
[31m-      }, {})[m[m
[31m-      ctx[course][session] = script[m[m
[31m-    }[m[m
[31m-  }[m[m
[31m-[m[m
[31m-  try {[m[m
[31m-    fs.writeFileSync('./script.json', JSON.stringify(ctx, null, 2))[m[m
[31m-  } catch (err) {[m[m
[31m-    console.error(err)[m[m
[31m-  }[m[m
[31m-}[m[m
[1mdiff --git a/package.json b/package.json[m[m
[1mindex d16cc2b..5eb0147 100644[m[m
[1m--- a/package.json[m[m
[1m+++ b/package.json[m[m
[36m@@ -4,7 +4,8 @@[m[m
   "private": true,[m[m
   "scripts": {[m[m
     "dev": "next dev",[m[m
[31m-    "build": "next build",[m[m
[32m+[m[32m    "script": "node script",[m[m
[32m+[m[32m    "build": "npm run script && next build",[m[m
     "start": "next start",[m[m
     "lint": "next lint"[m[m
   },[m[m
[1mdiff --git a/pages/api/search.js b/pages/api/search.js[m[m
[1mindex fcde373..32331b4 100644[m[m
[1m--- a/pages/api/search.js[m[m
[1m+++ b/pages/api/search.js[m[m
[36m@@ -1,5 +1,5 @@[m[m
 import nc from 'next-connect'[m[m
[31m-import ctx from '../../script.json'[m[m
[32m+[m[32mimport ctx from '../../scripts.json'[m[m
 [m[m
 const handler = nc().post((req, res) => {[m[m
:[K[K   const search = req.body.searchTerm[m[m
[1mdiff --git a/pages/index.js b/pages/index.js[m[m
[1mindex c1bf25a..0f06bba 100644[m[m
[1m--- a/pages/index.js[m[m
[1m+++ b/pages/index.js[m[m
[36m@@ -1,9 +1,8 @@[m[m
 import Head from 'next/head'[m[m
 import Form from '../components/Form'[m[m
 import styles from '../styles/Home.module.css'[m[m
[31m-import { buildScript, cleanUp } from '../lib/utils'[m[m
 [m[m
[31m-export default function Homepage({ found }) {[m[m
[32m+[m[32mexport default function Homepage() {[m[m
   return ([m[m
     <div className={styles.container}>[m[m
       <Head>[m[m
[36m@@ -14,7 +13,6 @@[m [mexport default function Homepage({ found }) {[m[m
 [m[m
       <main className={styles.main}>[m[m
         <h1 className={styles.title}>Frontend Masters Script</h1>[m[m
[31m-        {found && <p>.DS_Store file(s) found, successfully deleted.</p>}[m[m
         <Form />[m[m
       </main>[m[m
 [m[m
[36m@@ -25,10 +23,3 @@[m [mexport default function Homepage({ found }) {[m[m
     </div>[m[m
   )[m[m
 }[m[m
[31m-[m[m
[31m-Homepage.getInitialProps = () => {[m[m
[31m-  const found = cleanUp(false)[m[m
[31m-  buildScript()[m[m
[31m-[m[m
[31m-  return { found }[m[m
[31m-}[m[m
[7m(END)[27m[K